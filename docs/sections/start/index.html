<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Litho Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Litho Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-28","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Litho" href="/opensearch.xml"><title data-react-helmet="true">Basics: DiffSection and GroupSection | Litho</title><meta data-react-helmet="true" property="og:url" content="https://fblitho.com/docs/sections/start"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Basics: DiffSection and GroupSection | Litho"><meta data-react-helmet="true" name="description" content="The Sections API is a declarative, composable, and thread-safe API for writing highly-optimized list screens, built on top of Litho. It tries to address issues we&#x27;ve had at Facebook when writing complex lists, such as maintaining many view types, handling multiple data sources and composing lists together."><meta data-react-helmet="true" property="og:description" content="The Sections API is a declarative, composable, and thread-safe API for writing highly-optimized list screens, built on top of Litho. It tries to address issues we&#x27;ve had at Facebook when writing complex lists, such as maintaining many view types, handling multiple data sources and composing lists together."><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fblitho.com/docs/sections/start"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/start" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/start" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7ff81ca3.css">
<link rel="stylesheet" href="/assets/css/main.30634811.css">
<link rel="preload" href="/assets/js/styles.10ad285b.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.efaf1af3.js" as="script">
<link rel="preload" href="/assets/js/main.fc619540.js" as="script">
<link rel="preload" href="/assets/js/1.bef55bbe.js" as="script">
<link rel="preload" href="/assets/js/2.9164bb93.js" as="script">
<link rel="preload" href="/assets/js/101.76b4e9ac.js" as="script">
<link rel="preload" href="/assets/js/104.2357c688.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.a71184da.js" as="script">
<link rel="preload" href="/assets/js/17896441.41a43866.js" as="script">
<link rel="preload" href="/assets/js/cce6ae5d.3c46de10.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Litho</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro/motivation">Docs</a><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a class="navbar__item navbar__link" href="/docs/tutorial/overview">Tutorial</a><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Litho</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro/motivation">Docs</a></li><li class="menu__list-item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="menu__link">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/overview">Tutorial</a></li><li class="menu__list-item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">What is Litho?</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/built-with-litho">Built with Litho</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/project-setup">Setting up the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/first-components">Components and Props</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/adding-state">Adding State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/handling-events">Handling Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/building-lists">Building Lists</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Main Concepts</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">UI Composition</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/layout-specs">Layout Specs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/mount-specs">Mount Specs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/flexbox-yoga">Layout System with Flexbox</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Coordinating State and Actions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/state-overview">State Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/hoisting-state">Hoisting State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/events">Events Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/trigger-events">Triggering events with Handles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/treeprops">TreeProps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/componenttree">ComponentTree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/dynamic-props">Dynamic Props</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Building lists</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/sections/start">Basics: DiffSection and GroupSection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/recycler-collection-component">Adding and adapting RecyclerCollection to your App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/best-practices">Best Practices and Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/hscrolls">Nested scrolling and measurement</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/api-overview">API 📄: annotations, events and lifecycles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/working-ranges">Advanced: Prefetch and pagination</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/services">Advanced: Granular Dependency Injection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/view-support">Advanced: Mixing with Android Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/diff-sections">Advanced: Writing your own DiffSection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/architecture">Internal 🏗: Sections implementation architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Widgets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/widgets/builtin-widgets">Built-in widgets</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devtools/android-studio-plugin">Android Studio Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devtools/flipper-plugins">Flipper Plugins</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/testing-overview">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Unit Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/unit-testing">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/subcomponent-testing">Sub-Component Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/prop-matching">Matching @Prop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/testing-treeprops">Matching @TreeProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/injectprop-matching">Matching @InjectProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/event-handler-testing">Event Handler Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/sections-testing">Testing Sections</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">UI Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/espresso-testing">End-to-End Tests</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/tests-in-android-studio">Testing in Android Studio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Animations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-basics">Animation basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-types">Types of Transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-all-layout">Animating All Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-choreography">Customizing Transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-definitions">Advanced: More ways to define transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-key-types">Advanced: Transitions key scoping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Accessibility</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/accessibility/accessibility-overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/performance/analysing-performance">Analysing Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/performance/spotting-performance-regressions">Spotting Performance Regressions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/immutability">Immutability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/props-vs-state">Props vs. State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/coding-style">Coding Style</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deep Dive</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reconciliation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/reconciliation">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/reconciliation/enabling-reconciliation">Enabling Reconciliation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/incremental-mount">Incremental Mount</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing-documentation">Contributing to Documentation</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Basics: DiffSection and GroupSection</h1></header><div class="markdown"><p><strong>The Sections API is a declarative, composable, and thread-safe API for writing highly-optimized list screens, built on top of Litho.</strong> It tries to address issues we&#x27;ve had at Facebook when writing complex lists, such as maintaining many view types, handling multiple data sources and composing lists together.</p><p>While Litho Components are used for displaying pieces of UI, Sections are a way of composing data into a list of Litho Components or Views. If you visualize your screen as being a tree of components, the nodes for the root of the tree and the subtrees are Sections, while the leaves are Litho Components that represent individual items that will be displayed on screen.</p><img src="/images/sections-intro.png" width="800px"><p>Sections use the same hierarchical declarative data model as Components and under the hood transparently handle things like calculating minimal sets of changes for data updates and doing granular UI refreshes. As part of Litho, the Sections API shares the same main concepts such as annotation-based code generation, event handling, props and state updates. It is built on top of <a href="https://developer.android.com/guide/topics/ui/layout/recyclerview" target="_blank" rel="noopener noreferrer">Android&#x27;s <code>RecyclerView</code></a>.</p><p>In this document we&#x27;ll walk you through the parts necessary to build a list: a <code>RecyclerCollectionComponent</code> for your layout, which sets several <code>DiffSection</code> that are either <code>SingleComponentSection</code> or <code>DataDiffSection</code>, all contained inside <code>GroupSection</code> hierarchies.</p><p>If you have the time we recommend you also watch this Litho Lesson which covers the basics of how the diffing happens:</p><div align="center"><iframe padding-top="10px" width="560" height="315" src="https://www.youtube-nocookie.com/embed/-Ahskig2Lw0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="recyclercollectioncomponent"></a>RecyclerCollectionComponent<a class="hash-link" href="#recyclercollectioncomponent" title="Direct link to heading">#</a></h2><p>You can use <code>RecyclerCollectionComponent</code> as you would use any other component in the framework by building it and adding it as a child in your layout.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">RecyclerCollectionComponent.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .section(createGroupSection())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is all you need to know about adding Sections to your layout for now. You can find an explanation of advanced use cases such as snapping and horizontal lists on the <a href="/docs/sections/recycler-collection-component">RecyclerCollectionComponent docs</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="diffsection"></a>DiffSection<a class="hash-link" href="#diffsection" title="Direct link to heading">#</a></h2><p>Most lists are composed of groups of homogeneous items interleaved with one-off items. As an example, imagine a list of contacts sorted alphabetically and separated by headers indicating the first letter of the contact&#x27;s name.</p><p>Following this model the Sections API ships two <code>DiffSectionSpec</code> implementations that can be combined to represent the structure of nearly any surface: <code>SingleComponentSection</code> and <code>DataDiffSection</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="singlecomponentsection"></a>SingleComponentSection<a class="hash-link" href="#singlecomponentsection" title="Direct link to heading">#</a></h3><p>A <code>SingleComponentSection</code> is used to represent a <strong>one-off row</strong> in a complex list. As the name suggests, you can use this Section to render a single Component which is passed to this Section as its only prop.</p><p>One of the typical use cases of a <code>SingleComponentSection</code> is to add a loading spinner at the end of a list:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">SingleComponentSection.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .component(Progress.create(c).build())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Or a header for your data:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">SingleComponentSection.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .component(Text.create(c).text(&quot;Friends&quot;).build())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="datadiffsection"></a>DataDiffSection<a class="hash-link" href="#datadiffsection" title="Direct link to heading">#</a></h3><p>A <code>DataDiffSection</code> is used to <strong>represent a homogeneous list of <em>immutable</em> data</strong>. The minimal information that you have to pass to a <code>DataDiffSection</code> is the list of items that it needs to render and a callback for rendering each item in this list.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">DataDiffSection.&lt;MyModel&gt;create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .data(ImmutableList.of(new MyModel(1), new MyModel(2), new MyModel(3)))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .renderEventHandler(MyGroupSection.onRenderEdge(c))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>DataDiffSection</code> is designed to efficiently render the parts of a surface that handle large flows of data. When an item at a certain position needs to be displayed on screen, the framework will check whether the model we have received in the new list of data changed since the last time we rendered it.</p><p>If the data changed for the item in that position, the framework will dispatch a <code>RenderEvent</code> for that item and the <code>DataDiffSection</code> will use the <code>RenderEvent</code> handler we passed as prop to create a Component for that item and display it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@OnEvent(RenderEvent.class)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">static RenderInfo onRenderEdge(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    @FromEvent MyModel model) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    return ComponentRenderInfo.create()</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .component(MyModelItemComponent.create(c).item(model).build())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>By default <code>DataDiffSection</code> will detect data changes by checking instance equality and subsequently calling <code>equals</code> on the objects in the data list.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You can visit the <a href="/docs/sections/best-practices">Best Practices and Performance</a> documentation for a deep dive of how to build performant and accurate diffing, including diffing for classes where <code>equals</code> is not overwritten.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="groupsection"></a>GroupSection<a class="hash-link" href="#groupsection" title="Direct link to heading">#</a></h2><p>A <code>GroupSectionSpec</code> is used to <strong>structure your Sections into a hierarchy</strong>, each one responsible for rendering its own chunk of data.</p><p>Group section specs are classes annotated with <code>@GroupSectionSpec</code>. Implementing a <code>GroupSectionSpec</code> is very simple: you only need to write one method annotated with <code>@OnCreateChildren</code>. This method returns a tree of Sections that will have root in this <code>GroupSectionSpec</code>.</p><p>Let&#x27;s have a look at how you would declare a simple list that contains a header followed by a list of <code>String</code> items:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@GroupSectionSpec</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">class SimpleListSectionSpec {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @OnCreateChildren</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  static Children onCreateChildren(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      @Prop String headerTitle,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      @Prop List&lt;String&gt; data) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    return Children.create()</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .child(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            SingleComponentSection.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .component(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                    Text.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                        .text(headerTitle)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                        .build()))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .child(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            DataDiffSection.&lt;String&gt;create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .data(data)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .renderEventHandler(SimpleListSection.onRender(c)))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @OnEvent(RenderEvent.class)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  static RenderInfo onRender(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      @FromEvent String model) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    return ComponentRenderInfo.create()</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .component(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            Text.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .text(model)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .build())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        .build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="putting-all-of-the-pieces-together"></a>Putting all of the pieces together<a class="hash-link" href="#putting-all-of-the-pieces-together" title="Direct link to heading">#</a></h2><p>Imagine a surface that has multiple such subsections consisting of a header and list of Strings. An example could be a list of contacts grouped alphabetically, delimited by headers showing the first letter of the name. You can easily achieve that by creating a <code>GroupSectionSpec</code> that has a <code>SimpleListSection</code> child for every letter.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@GroupSectionSpec</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">class ContactsSectionSpec {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @OnCreateChildren</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  static Children onCreateChildren(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      @Prop List&lt;String&gt; data) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    final Children.Builder builder = Children.create();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    for(char firstLetter = &#x27;A&#x27;; firstLetter &lt;= &#x27;Z&#x27;; firstLetter++) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        builder.child(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            SimpleListSection.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .key(String.valueOf(firstLetter))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .headerTitle(String.valueOf(firstLetter))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">                .data(getItemsForLetter(firstLetter, data)));</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    return build.build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Below is a representation of the tree of Sections that has the root in <code>ContactsSectionSpec</code>. Each node in the tree is a Section, and the leaves are Components that can be rendered on screen. Each one of the sections in the tree acts as a data source. Its responsibilities are to describe what data it needs and how that data should be rendered.</p><img src="/images/group-section-spec.png" width="800"><p>The Sections hierarchy becomes a data source for the <code>RecyclerCollectionComponent</code>, and we only have to pass the data that the <code>ContactsSection</code> will use to create each <code>SimpleListSection</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@OnCreateLayout</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">static Component onCreateLayout(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    final ComponentContext c) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  return RecyclerCollectionComponent.create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .section(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        ContactsSection.create(new SectionContext(c))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            .dataModel(ImmutableList.of(&quot;Andy&quot;, &quot;Aziz&quot;, &quot;Aditya&quot;, &quot;Nico&quot;, &quot;Sergey&quot;))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            .build())</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    .build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>That is everything there is to most list you&#x27;ll build. A small API surface for a lot of functionality! The complexity of handling operations on your list, such as inserts or removes, is hidden away and handled by the infrastructure.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="where-to-go-next"></a>Where to go next?<a class="hash-link" href="#where-to-go-next" title="Direct link to heading">#</a></h2><p>We suggest reading into <a href="/docs/sections/best-practices">Best Practices and Performance</a> first. Afterwards you can head for one of the documents referring to advanced use cases your list may have, such as <a href="/docs/sections/recycler-collection-component">complex list layouts</a>, <a href="/docs/sections/services">granular dependency injection</a>, or <a href="/docs/sections/working-ranges">prefetch and pagination</a>.</p><div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/litho/edit/master/website/../docs/sections/start.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/mainconcepts/coordinate-state-actions/dynamic-props"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Dynamic Props</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sections/recycler-collection-component"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adding and adapting RecyclerCollection to your App »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#recyclercollectioncomponent" class="table-of-contents__link">RecyclerCollectionComponent</a></li><li><a href="#diffsection" class="table-of-contents__link">DiffSection</a><ul><li><a href="#singlecomponentsection" class="table-of-contents__link">SingleComponentSection</a></li><li><a href="#datadiffsection" class="table-of-contents__link">DataDiffSection</a></li></ul></li><li><a href="#groupsection" class="table-of-contents__link">GroupSection</a></li><li><a href="#putting-all-of-the-pieces-together" class="table-of-contents__link">Putting all of the pieces together</a></li><li><a href="#where-to-go-next" class="table-of-contents__link">Where to go next?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Open Source</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">How To Contribute</a></li><li class="footer__item"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open Source Projects</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://twitter.com/fblitho" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/styles.10ad285b.js"></script>
<script src="/assets/js/runtime~main.efaf1af3.js"></script>
<script src="/assets/js/main.fc619540.js"></script>
<script src="/assets/js/1.bef55bbe.js"></script>
<script src="/assets/js/2.9164bb93.js"></script>
<script src="/assets/js/101.76b4e9ac.js"></script>
<script src="/assets/js/104.2357c688.js"></script>
<script src="/assets/js/935f2afb.a71184da.js"></script>
<script src="/assets/js/17896441.41a43866.js"></script>
<script src="/assets/js/cce6ae5d.3c46de10.js"></script>
</body>
</html>