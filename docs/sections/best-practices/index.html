<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Litho Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Litho Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-28","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Litho" href="/opensearch.xml"><title data-react-helmet="true">Best Practices and Performance | Litho</title><meta data-react-helmet="true" property="og:url" content="https://fblitho.com/docs/sections/best-practices"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Best Practices and Performance | Litho"><meta data-react-helmet="true" name="description" content="When working with Sections, it is not unfrequent to ask yourself whether what you’re doing is performant, efficient, or idiomatic. The API is short and straightforward, which makes you feel like the problems have to be very subtle and hard to find. The reality is much simpler: Sections is built on top of Android’s RecyclerView and inherits all of its properties, which are common knowledge amongst Android developers. You could build your own if you need to, and it won’t be much different from what Sections gives you today."><meta data-react-helmet="true" property="og:description" content="When working with Sections, it is not unfrequent to ask yourself whether what you’re doing is performant, efficient, or idiomatic. The API is short and straightforward, which makes you feel like the problems have to be very subtle and hard to find. The reality is much simpler: Sections is built on top of Android’s RecyclerView and inherits all of its properties, which are common knowledge amongst Android developers. You could build your own if you need to, and it won’t be much different from what Sections gives you today."><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fblitho.com/docs/sections/best-practices"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/best-practices" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/best-practices" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7ff81ca3.css">
<link rel="stylesheet" href="/assets/css/main.30634811.css">
<link rel="preload" href="/assets/js/styles.10ad285b.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.efaf1af3.js" as="script">
<link rel="preload" href="/assets/js/main.fc619540.js" as="script">
<link rel="preload" href="/assets/js/1.bef55bbe.js" as="script">
<link rel="preload" href="/assets/js/2.9164bb93.js" as="script">
<link rel="preload" href="/assets/js/101.76b4e9ac.js" as="script">
<link rel="preload" href="/assets/js/104.2357c688.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.a71184da.js" as="script">
<link rel="preload" href="/assets/js/17896441.41a43866.js" as="script">
<link rel="preload" href="/assets/js/33faff9b.ee2b0bb5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Litho</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro/motivation">Docs</a><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a class="navbar__item navbar__link" href="/docs/tutorial/overview">Tutorial</a><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Litho</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro/motivation">Docs</a></li><li class="menu__list-item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="menu__link">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/overview">Tutorial</a></li><li class="menu__list-item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">What is Litho?</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/built-with-litho">Built with Litho</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/project-setup">Setting up the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/first-components">Components and Props</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/adding-state">Adding State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/handling-events">Handling Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/building-lists">Building Lists</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Main Concepts</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">UI Composition</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/layout-specs">Layout Specs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/mount-specs">Mount Specs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/uicomposition/flexbox-yoga">Layout System with Flexbox</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Coordinating State and Actions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/state-overview">State Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/hoisting-state">Hoisting State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/events">Events Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/trigger-events">Triggering events with Handles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/treeprops">TreeProps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/componenttree">ComponentTree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mainconcepts/coordinate-state-actions/dynamic-props">Dynamic Props</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Building lists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/start">Basics: DiffSection and GroupSection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/recycler-collection-component">Adding and adapting RecyclerCollection to your App</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/sections/best-practices">Best Practices and Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/hscrolls">Nested scrolling and measurement</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/api-overview">API 📄: annotations, events and lifecycles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/working-ranges">Advanced: Prefetch and pagination</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/services">Advanced: Granular Dependency Injection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/view-support">Advanced: Mixing with Android Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/diff-sections">Advanced: Writing your own DiffSection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/architecture">Internal 🏗: Sections implementation architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Widgets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/widgets/builtin-widgets">Built-in widgets</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devtools/android-studio-plugin">Android Studio Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devtools/flipper-plugins">Flipper Plugins</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/testing-overview">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Unit Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/unit-testing">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/subcomponent-testing">Sub-Component Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/prop-matching">Matching @Prop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/testing-treeprops">Matching @TreeProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/injectprop-matching">Matching @InjectProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/event-handler-testing">Event Handler Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/sections-testing">Testing Sections</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">UI Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/espresso-testing">End-to-End Tests</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing/tests-in-android-studio">Testing in Android Studio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Animations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-basics">Animation basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-types">Types of Transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-all-layout">Animating All Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-choreography">Customizing Transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-definitions">Advanced: More ways to define transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/animations/transition-key-types">Advanced: Transitions key scoping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Accessibility</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/accessibility/accessibility-overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/performance/analysing-performance">Analysing Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/performance/spotting-performance-regressions">Spotting Performance Regressions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/immutability">Immutability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/props-vs-state">Props vs. State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/best-practices/coding-style">Coding Style</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deep Dive</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reconciliation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/reconciliation">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/reconciliation/enabling-reconciliation">Enabling Reconciliation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deep-dive/incremental-mount">Incremental Mount</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing-documentation">Contributing to Documentation</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Best Practices and Performance</h1></header><div class="markdown"><p>When working with Sections, it is not unfrequent to ask yourself whether what you’re doing is performant, efficient, or idiomatic. The API is short and straightforward, which makes you feel like the problems have to be very subtle and hard to find. The reality is much simpler: Sections is built on top of Android’s RecyclerView and inherits all of its properties, which are common knowledge amongst Android developers. You could build your own if you need to, and it won’t be much different from what Sections gives you today.</p><p>In this document we’ll introduce the <strong>two key qualities of performance</strong> in Sections: <strong>identity</strong> and <strong>immutability</strong>. These qualities of a data model identity is what is <strong>used by Sections to define whether a section needs to be redrawn</strong>. The more unnecessary redraws, the worse your component will perform. Skipping a redraw for a component that has meaningfully changed is not acceptable.</p><p>Once you read through this document if you feel you need to know <em>more</em> and <em>deeper</em> about RecyclerView, we recommend the original articles on <a href="https://developer.android.com/guide/topics/ui/layout/recyclerview" target="_blank" rel="noopener noreferrer">RecyclerView</a> and <a href="https://developer.android.com/reference/androidx/recyclerview/widget/DiffUtil" target="_blank" rel="noopener noreferrer">DiffUtils</a>, the foundations of Sections. You’ll find they have an extensive API full of flexibility and pitfalls we’ve condensed and simplified for Facebook use cases.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="immutability"></a>Immutability<a class="hash-link" href="#immutability" title="Direct link to heading">#</a></h2><p>Immutability is a quality of a data model, where its values cannot change over time. An example of mutable data is an <code>ArrayList</code>, which can <em>add</em> new elements. An example of immutable data is Java’s <code>String</code>, which cannot be modified in-place, and whose operations always create a new <code>String</code> instance.</p><p>As a performance-oriented person your intuition may be that creating objects incurs on a penalty and mutability is obviously faster. This is certainly true for cases with small locality, such as single-class CPU-bound algorithms. For large-scale cases where concurrency is involved, <strong>the complexity added to prevent data races and other nasty behaviours heavily offsets the cost of a few additional allocations per second</strong>.</p><p>So, what can we do to minimise the number of additional allocations of immutable data models? Never request them if they’re not necessary! To do this <strong>on Sections we visit your data model to find the smallest granularity we have to request a redraw for</strong>. This is done using the data model’s identity.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="identity"></a>Identity<a class="hash-link" href="#identity" title="Direct link to heading">#</a></h2><p>Identity is another quality of a data model that defines <strong>whether it is equal to another data model</strong>, or even itself. <strong>The action of comparing two data models to find the most granular differences is referred as diffing</strong>.</p><p>What the equality is for a data model is to be defined by its creator. It can be defined by its reference in memory (<em>referencial equality</em>), the hash of its contents (<em>hash equality</em>), the value of a field such as id (<em>identifier equality</em>), or even delegate to the equality of each of its fields (<em>structural equality</em>).</p><p>Let’s see one example, <code>User</code>, which has a list of <code>Friend</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><div tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">typealias User = {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  user: FbId</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  friends: Array&lt;Friend&gt;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">typealias Friend = {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  name: String</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  id: FbId</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">User user1 = new User(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  user= &quot;1234&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  friends= [</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    new Friend(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      name= &quot;kata&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      id= &quot;333&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    )</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  ]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">User user2 = new User(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  user= &quot;1234&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  friends= [</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    new Friend(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      name= &quot;kata&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      id= &quot;333&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    )</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  ]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We could define the identity of <code>User</code> as its <em>reference</em>, which implies:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1 == user1 // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1 == user2 // false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Or we could define it as the <em>structure</em> or <em>hash</em> of its contents, which becomes:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.hashCode() == user1.hashCode() // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.hashCode() == user2.hashCode() // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.equals(user1)                  // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.equals(user2)                  // true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Or we could just use the <code>user</code> <em>identifier</em> as the identity:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">User user3 = new User(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  user= &quot;1234&quot;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  friends= []</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.user == user1.user // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.user == user2.user // true</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">user1.user == user3.user // true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>So, choosing the right identity for your data model is key for performance.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Notice that these go from more strict to less strict: reference, structure and hash, then identifier.</p></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Java classes use the <code>equals</code> function to define their identity, and the default implementation delegates to referential equality. Do remember to <code>@Override</code> it accordingly.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="singlecomponentsection-diffing"></a>SingleComponentSection Diffing<a class="hash-link" href="#singlecomponentsection-diffing" title="Direct link to heading">#</a></h2><p>SingleComponentSection is built as a thin wrapper, so it follows the Component rules for identity. <strong>If a wrapped Component has not significantly changed it won’t trigger a redraw</strong>.</p><p>The diffing algorithm for Components starts by checking the <em>referential equality</em> of the component with <code>==</code>, then it traverses its Props and checks their <em>structural equality</em> with <code>equals</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="datadiffsection-diffing"></a>DataDiffSection Diffing<a class="hash-link" href="#datadiffsection-diffing" title="Direct link to heading">#</a></h2><p>The main API of Sections is a wrapper around Android’s <code>RecyclerView</code> operations, calling notifications for updates, insertions and removals behind the scenes. It takes a <code>List</code> of elements and uses a <strong>traversal algorithm that takes into account all the kinds of identity equality listed above by using <code>==</code>, <code>equals</code> and user defined Events</strong>.</p><p>First it checks whether it needs to do a granular identity check on the data model, and if the check passes it visits the contents of the data model.</p><p>The check for granularity does <em>referential equality</em> with <code>==</code>, then checks <em>identifier equality</em> using the event <code>OnCheckIsSameItemEvent</code>, and lastly it falls back to <em>structural equality</em> with <code>equals</code>. Remember that Java’s <code>equals</code> defaults to referential equality. If any of them passes, it goes one level further to check for equality on its contents using the event <code>OnCheckIsSameContentEvent</code>.</p><p>These two new events <code>OnCheckIsSameItemEvent</code> and <code>OnCheckIsSameContentEvent</code> exist for the benefit of data models where it’s not possible to override <em>equals</em> directly, i.e. using GraphQL-generated models directly.</p><p>Their API is similar to other Litho Events, where a function needs to be annotated as the listener in the ComponentSpec. The model to compare has to be annotated with <code>@FromEvent</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@OnEvent(OnCheckIsSameItemEvent.class)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">protected static Boolean onCheckIsSameItemEvent(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @InjectProp SomeHelper helper,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @FromEvent BookmarkFolderItemComponentGraphQL previousItem,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @FromEvent BookmarkFolderItemComponentGraphQL nextItem) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  return previousItem.id == nextItem.id;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@OnEvent(OnCheckIsSameContentEvent.class)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">protected static boolean onCheckIsSameContent(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  SectionContext c,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @InjectProp SomeHelper helper,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @FromEvent BookmarkFolderItemComponentGraphQL previousItem,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  @FromEvent BookmarkFolderItemComponentGraphQL nextItem) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  return previousItem.bookmark.equals(nextItem.bookmark);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This means that we’ve made the algorithm check if two <code>BookmarkFolderItemComponentGraphQL</code> have the same <em>reference</em> with <code>==</code>, then if they have the same <code>id</code> <em>identifier</em>, and lastly if they match their <em>structure</em> with <code>equals</code>. If either of these checks pass, then we dig deeper to compare the <em>structure</em> of their bookmark field.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usage-pitfalls-to-avoid"></a>Usage pitfalls to avoid<a class="hash-link" href="#usage-pitfalls-to-avoid" title="Direct link to heading">#</a></h2><p>With this knowledge in mind, we can talk about tips and pitfalls to take into account to prevent over- and under- redraws.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="keep-component-and-section-keys-stable"></a>Keep Component and Section keys stable<a class="hash-link" href="#keep-component-and-section-keys-stable" title="Direct link to heading">#</a></h3><p>Same as with any other Component, Sections have a key that can be overloaded to the user’s benefit. <strong>If the key is unstable, meaning that it changes at a different frequency than its contents, it will result in overdraws</strong>. Double check both for the Section and the RecyclerCollectionComponent.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="it-is-still-just-a-fancy-recyclerview-adapter"></a>It is still just a fancy RecyclerView adapter<a class="hash-link" href="#it-is-still-just-a-fancy-recyclerview-adapter" title="Direct link to heading">#</a></h3><p>Any bugs or unexpected behaviours inherited from the Android implementation remain. <strong>It is not uncommon to encounter a known issue, so be sure to also search the Android bugtracker</strong>.</p><p>One frequent support request asks <strong>why adding elements before the first element doesn’t scroll the view to the top on the first redraw?</strong> This is an inherited behaviour that is easily solved by <code>requestFocus</code> to scroll to the current top position.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sections-may-have-different-contexts-than-their-components"></a>Sections may have different contexts than their Components<a class="hash-link" href="#sections-may-have-different-contexts-than-their-components" title="Direct link to heading">#</a></h3><p>This happens frequently when <strong>events are not triggered</strong> when the caller and the listener are on different <code>ComponentContext</code>. Check that your container <code>ComponentTree</code> and the Components you&#x27;re displaying belong in the same context.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usage-tips-to-follow"></a>Usage tips to follow<a class="hash-link" href="#usage-tips-to-follow" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="triggering-partial-redraws-from-outside-the-sections-component"></a>Triggering partial redraws from outside the Sections Component<a class="hash-link" href="#triggering-partial-redraws-from-outside-the-sections-component" title="Direct link to heading">#</a></h3><p>We will use the example of a <code>RecyclerCollectionComponent</code> that is acted externally, by selecting and highlighting a bookmark after it has been added from a post in another Component.</p><p>The best approach here is to rely on <code>DataDiffSection</code> diffing to modify the right row. That will mean either <strong>modifying or wrapping the current data model to include a new property</strong> of whether it’s highlighted.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">class BookmarkFolderItemComponentHighlight {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  int highlightColor = 0;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  bool isHighlight = false;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  BookmarkFolderItemComponentGraphQL model;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  // constructor</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  // equals and hashCode</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>These additional object allocations are cheaper than a full redrawn for single-row changes.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="triggering-full-redraws-from-outside-the-sections-component"></a>Triggering full redraws from outside the Sections Component<a class="hash-link" href="#triggering-full-redraws-from-outside-the-sections-component" title="Direct link to heading">#</a></h3><p>We will use the example of a “Night Mode“ for your <code>RecyclerCollection</code>. You’d like for the background to change between both day and night modes when a button that’s not part of the <code>RecyclerCollection</code> is clicked.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This approach causes the list to lose its State. Prefer partial redraws wherever possible.</p></div></div><p>The easiest way of triggering a redraw from scratch is by <strong>making the color state part of the Section key</strong>. When your Component triggers the event and the algorithm traverses the view, <strong>it’ll see that the key has change and trigger a full redraw of the relevant Section</strong>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@OnCreateChildren</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">static Children onCreateChildren(final SectionContext c, @Prop int color) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  return Children.create()</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      .child(</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          DataDiffSection.&lt;Integer&gt;create(c)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">              .key(&quot;my_section_&quot; + color)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">              .data(generateData(32))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">              .renderEventHandler(ListSection.onRender(c)))</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      .build();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/litho/edit/master/website/../docs/sections/best-practices.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/sections/recycler-collection-component"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Adding and adapting RecyclerCollection to your App</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sections/hscrolls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nested scrolling and measurement »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#immutability" class="table-of-contents__link">Immutability</a></li><li><a href="#identity" class="table-of-contents__link">Identity</a></li><li><a href="#singlecomponentsection-diffing" class="table-of-contents__link">SingleComponentSection Diffing</a></li><li><a href="#datadiffsection-diffing" class="table-of-contents__link">DataDiffSection Diffing</a></li><li><a href="#usage-pitfalls-to-avoid" class="table-of-contents__link">Usage pitfalls to avoid</a><ul><li><a href="#keep-component-and-section-keys-stable" class="table-of-contents__link">Keep Component and Section keys stable</a></li><li><a href="#it-is-still-just-a-fancy-recyclerview-adapter" class="table-of-contents__link">It is still just a fancy RecyclerView adapter</a></li><li><a href="#sections-may-have-different-contexts-than-their-components" class="table-of-contents__link">Sections may have different contexts than their Components</a></li></ul></li><li><a href="#usage-tips-to-follow" class="table-of-contents__link">Usage tips to follow</a><ul><li><a href="#triggering-partial-redraws-from-outside-the-sections-component" class="table-of-contents__link">Triggering partial redraws from outside the Sections Component</a></li><li><a href="#triggering-full-redraws-from-outside-the-sections-component" class="table-of-contents__link">Triggering full redraws from outside the Sections Component</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Open Source</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">How To Contribute</a></li><li class="footer__item"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open Source Projects</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://twitter.com/fblitho" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/styles.10ad285b.js"></script>
<script src="/assets/js/runtime~main.efaf1af3.js"></script>
<script src="/assets/js/main.fc619540.js"></script>
<script src="/assets/js/1.bef55bbe.js"></script>
<script src="/assets/js/2.9164bb93.js"></script>
<script src="/assets/js/101.76b4e9ac.js"></script>
<script src="/assets/js/104.2357c688.js"></script>
<script src="/assets/js/935f2afb.a71184da.js"></script>
<script src="/assets/js/17896441.41a43866.js"></script>
<script src="/assets/js/33faff9b.ee2b0bb5.js"></script>
</body>
</html>